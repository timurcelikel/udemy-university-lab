<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="University Management" name="description">
    <meta content="Michael Pogrebinsky" name="author">
    <title>University Management</title>


    <link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="/jquery/jquery-3.6.0.min.js"></script>


    <link href="/css/student_view.css" rel="stylesheet">
</head>
<body class="d-flex flex-column min-vh-100">

<div class="container">
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
        <a th:href="@{/student(student_id=${student_id})}" class="navbar-brand text-dark">
            <svg style="width: 1.5em; margin-right: 0.25em" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 122.88 101.37"><g><path d="M12.64,77.27l0.31-54.92h-6.2v69.88c8.52-2.2,17.07-3.6,25.68-3.66c7.95-0.05,15.9,1.06,23.87,3.76 c-4.95-4.01-10.47-6.96-16.36-8.88c-7.42-2.42-15.44-3.22-23.66-2.52c-1.86,0.15-3.48-1.23-3.64-3.08 C12.62,77.65,12.62,77.46,12.64,77.27L12.64,77.27z M103.62,19.48c-0.02-0.16-0.04-0.33-0.04-0.51c0-0.17,0.01-0.34,0.04-0.51V7.34 c-7.8-0.74-15.84,0.12-22.86,2.78c-6.56,2.49-12.22,6.58-15.9,12.44V85.9c5.72-3.82,11.57-6.96,17.58-9.1 c6.85-2.44,13.89-3.6,21.18-3.02V19.48L103.62,19.48z M110.37,15.6h9.14c1.86,0,3.37,1.51,3.37,3.37v77.66 c0,1.86-1.51,3.37-3.37,3.37c-0.38,0-0.75-0.06-1.09-0.18c-9.4-2.69-18.74-4.48-27.99-4.54c-9.02-0.06-18.03,1.53-27.08,5.52 c-0.56,0.37-1.23,0.57-1.92,0.56c-0.68,0.01-1.35-0.19-1.92-0.56c-9.04-4-18.06-5.58-27.08-5.52c-9.25,0.06-18.58,1.85-27.99,4.54 c-0.34,0.12-0.71,0.18-1.09,0.18C1.51,100.01,0,98.5,0,96.64V18.97c0-1.86,1.51-3.37,3.37-3.37h9.61l0.06-11.26 c0.01-1.62,1.15-2.96,2.68-3.28l0,0c8.87-1.85,19.65-1.39,29.1,2.23c6.53,2.5,12.46,6.49,16.79,12.25 c4.37-5.37,10.21-9.23,16.78-11.72c8.98-3.41,19.34-4.23,29.09-2.8c1.68,0.24,2.88,1.69,2.88,3.33h0V15.6L110.37,15.6z M68.13,91.82c7.45-2.34,14.89-3.3,22.33-3.26c8.61,0.05,17.16,1.46,25.68,3.66V22.35h-5.77v55.22c0,1.86-1.51,3.37-3.37,3.37 c-0.27,0-0.53-0.03-0.78-0.09c-7.38-1.16-14.53-0.2-21.51,2.29C79.09,85.15,73.57,88.15,68.13,91.82L68.13,91.82z M58.12,85.25 V22.46c-3.53-6.23-9.24-10.4-15.69-12.87c-7.31-2.8-15.52-3.43-22.68-2.41l-0.38,66.81c7.81-0.28,15.45,0.71,22.64,3.06 C47.73,78.91,53.15,81.64,58.12,85.25L58.12,85.25z"/></g></svg>
            Student Profile
        </a>
        <div class="col-md-3 text-end">
            <a class="btn btn-outline-primary me-2" href="/">Log Out</a>
        </div>
    </header>
</div>

<main>
    <div class="container">
        <!-- Profile -->
        <div class="container" th:if="not ${show_courses}">
            <h2 class="pb-2 border-bottom mt-4">Your Student Profile</h2>
            <br>
            <dl class="row">
  				<dt class="col-sm-3">First Name</dt>
  				<dd class="col-sm-9" th:text="${student.firstName}"></dd>
  				<dt class="col-sm-3">Last Name</dt>
  				<dd class="col-sm-9" th:text="${student.lastName}"></dd>
  				<dt class="col-sm-3">Email Address</dt>
  				<dd class="col-sm-9" th:text="${student.email}"></dd>
  				<dt class="col-sm-3">Date of Birth</dt>
  				<dd class="col-sm-9" th:text="${student.dateOfBirth}"></dd>
  			</dl>
  			<h3>Learner Profile</h3>
  			<dl class="row">
  				<dt class="col-sm-3">Start Year</dt>
  				<dd class="col-sm-9" th:text="${student.learnerProfile.startYear}"></dd>
  				<dt class="col-sm-3">Number of Credits</dt>
  				<dd class="col-sm-9" th:text="${student.learnerProfile.numberOfCredits}"></dd>
  				<dt class="col-sm-3">Graduated</dt>
  				<dd class="col-sm-9" th:text="${student.learnerProfile.isGraduated ? 'Yes' : 'No'}"></dd>
  				<dt class="col-sm-3">Current GPA</dt>
  				<dd class="col-sm-9" th:text="${student.learnerProfile.gpa}"></dd>
  			</dl>
            <a class="btn btn-primary" th:href="@{/student/courses#courses-available(student_id=${student_id})}">Enroll in courses</a>
  			<a class="btn btn-primary" th:href="@{/student/courses#courses-enrolled(student_id=${student_id})}">View enrolled courses</a>
        </div>

        <!-- COURSES -->
        <div class="container" th:if="${show_courses}">
            <h2 class="pb-2 border-bottom mt-4" id="courses-available">Available Courses to Enroll</h2>
            <br>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                <div class="col" th:each="course: ${all_courses}" th:if=" not ${#sets.contains(student_courses, course)}">
                    <div class="card shadow-sm bg-light h-100 d-flex flex-column">
                        <div class="card-body">
                            <h4 class="text-center py-2 card-title" th:text="${#strings.abbreviate(course.title, 120)}">Course</h4>
                            <p class="card-text font-italic card-text" th:text="${#strings.abbreviate(course.description, 130)}"> Description</p>
                        </div>
                        <div class="text-center mt-auto mb-4">
                            <form th:action="@{/student/enroll(student_id=${student_id}, course_id=${course.courseId})}" method="post">
                                <button type="submit" class="btn btn-success">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square-fill" viewBox="0 0 16 16">
                                        <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"></path>
                                    </svg>
                                    Enroll Now
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="pb-2 border-bottom mt-4" th:if="${not student_courses.empty}" id="courses-enrolled">You are Enrolled in the Following Courses</h2>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
					<div class="col" th:each="course: ${student_courses}">
                    <div class="card shadow-sm bg-light d-flex flex-column">
                        <div class="card-body">
                            <h4 class="text-center py-2 card-title" th:text="${#strings.abbreviate(course.title, 120)}">Course</h4>
                            <p class="card-text font-italic card-text" th:text="${#strings.abbreviate(course.description, 130)}"> Description</p>
                        </div>
                        <div class="text-center mt-auto mb-4">
                            <form th:action="@{/student/leave_course(student_id=${student_id}, course_id=${course.courseId})}" th:if="${#sets.contains(student_courses, course)}" method="post">
                                <button type="submit" class="btn btn-outline-danger" >
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar2-x" viewBox="0 0 16 16">
                                        <path d="M6.146 8.146a.5.5 0 0 1 .708 0L8 9.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 10l1.147 1.146a.5.5 0 0 1-.708.708L8 10.707l-1.146 1.147a.5.5 0 0 1-.708-.708L7.293 10 6.146 8.854a.5.5 0 0 1 0-.708z"></path>
                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"></path>
                                        <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"></path>
                                    </svg>
                                    Leave Course
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="my-5 pt-5 text-muted text-center text-small mt-auto">
    <p class="mb-1">&copy; 2022 Michael Pogrebinsky - www.topdeveloperacademy.com</p>
</footer>

<script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
